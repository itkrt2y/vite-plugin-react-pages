<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>📘Vite Pages</title>
  <link rel="stylesheet" href="/vite-plugin-react-pages/assets/style.6ad85e24.css" />
</head>
  <body>
    <script>window._vitePagesSSR={"routePath":"/examples/component-library"};</script>
<div id="root"><div class="vp-local-layout"><header class="vp-antd-layout-header vp-local-header"><div class="vp-antd-row vp-antd-row-stretch" style="height:100%"><div style="flex:0 0 auto" class="vp-antd-col"><div class="vp-antd-row vp-antd-row-center vp-antd-row-middle" style="height:100%"><div class="vp-antd-col"><a class="vp-local-logoLink" href="/vite-plugin-react-pages/"><div style="margin-left:40px;font-size:20px">Vite Pages</div></a></div></div></div><div style="flex:auto" class="vp-antd-col"><div class="vp-antd-row vp-antd-row-end"><div class="vp-antd-col"><ul class="vp-antd-menu-overflow vp-antd-menu vp-antd-menu-root vp-antd-menu-horizontal vp-antd-menu-light vp-local-nav" role="menu" tabindex="0" data-menu-list="true"><li class="vp-antd-menu-overflow-item vp-antd-menu-item vp-antd-menu-item-only-child" style="opacity:1;order:0" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="https://github.com/vitejs/vite-plugin-react-pages" target="_blank" rel="noopener noreferrer">Github<!-- -->⭐</a></span></li><li class="vp-antd-menu-overflow-item vp-antd-menu-overflow-item-rest vp-antd-menu-submenu vp-antd-menu-submenu-horizontal vp-antd-menu-submenu-disabled" style="opacity:0;height:0;overflow-y:hidden;order:9007199254740991;pointer-events:none;position:absolute" aria-hidden="true" role="none"><div role="menuitem" class="vp-antd-menu-submenu-title" aria-expanded="false" aria-haspopup="true" aria-disabled="true"><span role="img" aria-label="ellipsis" class="anticon anticon-ellipsis"><svg viewBox="64 64 896 896" focusable="false" data-icon="ellipsis" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"></path></svg></span><i class="vp-antd-menu-submenu-arrow"></i></div></li></ul><div style="display:none" aria-hidden="true"></div></div><div class="vp-antd-col"></div></div></div></div></header><div class="vp-antd-row vp-local-body"><div class="vp-antd-col vp-antd-col-md-6 vp-antd-col-lg-6 vp-antd-col-xl-5 vp-antd-col-xxl-4"><div class="vp-local-sider"><ul class="vp-antd-menu vp-antd-menu-root vp-antd-menu-inline vp-antd-menu-light vp-local-sideMenu" role="menu" tabindex="0" data-menu-list="true"><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/">Introduction</a></span></li><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/official-theme">Official Theme</a></span></li><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/fs-routing">Filesystem Routing</a></span></li><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/page-data">Page data</a></span></li><li class="vp-antd-menu-item-group"><div class="vp-antd-menu-item-group-title" title="Advanced">Advanced</div><ul class="vp-antd-menu-item-group-list"><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/advanced-fs-routing">Advanced FS Routing</a></span></li><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/theme-customization">Theme Customization</a></span></li><li class="vp-antd-menu-item vp-antd-menu-item-selected vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/examples/component-library">Examples</a></span></li></ul></li><li class="vp-antd-menu-item-group"><div class="vp-antd-menu-item-group-title" title="Upgrade Guides">Upgrade Guides</div><ul class="vp-antd-menu-item-group-list"><li class="vp-antd-menu-item vp-antd-menu-item-only-child" style="padding-left:30px" role="menuitem" tabindex="-1"><span class="vp-antd-menu-title-content"><a href="/vite-plugin-react-pages/upgrade-from-v2">Upgrade from v2</a></span></li></ul></li></ul><div style="display:none" aria-hidden="true"></div></div></div><div style="flex:auto;min-width:0" class="vp-antd-col"><main class="vp-antd-layout-content vp-local-content"><div class="markdown-body"><h1>Example: develop a component library</h1><p>This is an example of using &quot;Advanced Filesystem Routing&quot; inside a component library project.</p><p>Suppose you are developing a React component library. Your project have file structure like this:</p><div><pre class="prism-code language-text" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">src</span></div><div class="token-line" style="color:#393A34"><span class="token plain">├── Button</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── demos</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── demo1.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   └── demo2.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── index.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── style.module.css</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   └── README.md</span></div><div class="token-line" style="color:#393A34"><span class="token plain">├── Card</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── demos</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── demo1.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   └── demo2.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── index.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── style.module.css</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   └── README.md</span></div><div class="token-line" style="color:#393A34"><span class="token plain">└── index.ts</span></div></pre></div><p>You want to use vite as your local demo development environment (because it is blazingly fast). <strong>How to collect all components and all demos from this project?</strong> The file structure doesn&#x27;t follow the <a href="/vite-plugin-react-pages/fs-routing">Basic Filesystem Routing Convention</a>.</p><p>The answer: implement your own filesystem routing convention!</p><div><pre class="prism-code language-ts" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// vite.config.ts</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token maybe-class-name">UserConfig</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;vite&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#393A34">*</span><span class="token imports"> </span><span class="token imports keyword" style="color:#00009f">as</span><span class="token imports"> path</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;path&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">reactRefresh</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@vitejs/plugin-react-refresh&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">mdx</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;vite-plugin-mdx&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">pages</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">DefaultPageStrategy</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;vite-plugin-react-pages&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  jsx</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;react&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">reactRefresh</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">mdx</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">pages</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      pagesDir</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;pages&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      pageStrategy</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name maybe-class-name">DefaultPageStrategy</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function-variable function" style="color:#d73a49">extraFindPages</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pagesDir</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> helpers</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> srcPath </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../src&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">String</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">process</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">SHOW_ALL_COMPONENT_DEMOS</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;true&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// show all component demos during dev</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token comment" style="color:#999988;font-style:italic">// put them in page `/components/demos/${componentName}`</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            helpers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">watchFiles</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              srcPath</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token string" style="color:#e3116c">&#x27;*/demos/**/*.{[tj]sx,md?(x)}&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fileHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> api</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> relative</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> absolute </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> file</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> match </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> relative</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">match</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                  </span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">(.*)\/demos\/(.*)\.([tj]sx|mdx?)$</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">match</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;unexpected file: &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> absolute</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> componentName</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> demoName</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> match</span></div><div class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> pageId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">/components/demos/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">componentName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// set page data</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> runtimeDataPaths </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getRuntimeData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pageId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token comment" style="color:#999988;font-style:italic">// the ?demo query will wrap the module with useful demoInfo</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">                runtimeDataPaths</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">demoName</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">absolute</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string string" style="color:#e3116c">?demo</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token comment" style="color:#999988;font-style:italic">// find all component README</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          helpers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">watchFiles</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            srcPath</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token string" style="color:#e3116c">&#x27;*/README.md?(x)&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">fileHandler</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> api</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> relative</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> path</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> absolute </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> file</span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> match </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> relative</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">match</span><span class="token punctuation" style="color:#393A34">(</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token regex regex-source language-regex" style="color:#36acaa">(.*)\/README\.mdx?$</span><span class="token regex regex-delimiter" style="color:#36acaa">/</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token plain">match</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">throw</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">new</span><span class="token plain"> </span><span class="token class-name known-class-name class-name">Error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;unexpected file: &#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> absolute</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> componentName</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> match</span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> pageId </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">/components/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">componentName</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// set page data</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> runtimeDataPaths </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getRuntimeData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pageId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              runtimeDataPaths</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">main</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> absolute</span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token comment" style="color:#999988;font-style:italic">// set page staticData</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> staticData </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> api</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">getStaticData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">pageId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">              staticData</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">main</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> helpers</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">extractStaticData</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">file</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  resolve</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    alias</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&#x27;my-lib&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">join</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;../src&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> </span><span class="token maybe-class-name">UserConfig</span></div></pre></div><p>We use <code>api.getRuntimeData(pageId)</code> and <code>api.getStaticData(pageId)</code> inside fileHandlers to get the pageData object. We can mutate the data object, and vite-pages will update its pages accordingly.</p><p>Checkout the complete example in <a href="https://github.com/vitejs/vite-plugin-react-pages/blob/master/packages/create-project/template-lib/vite.config.ts">the library project scaffold</a>.
You can initialize this project with command: <code>npm init vite-pages library-demo --template lib</code>.</p><h2><a class="anchor" id="monorepo" href="/vite-plugin-react-pages/examples/component-library#monorepo"><span class="octicon octicon-link"></span></a>Monorepo</h2><p>In some cases, we want to publish each component in their own packages.</p><blockquote><p>Monorepo has more advantages when components are complex and tend to evolve independently. If we use a single package to publish all these components like the above example, all components share a version number. If we need to introduce a breaking change in a component, we have to bump the major version of the whole package. But with the monorepo we only need to bump the major version of that sub-package. Users will be more confident to upgrade.</p></blockquote><p>In that case, we create a seperate package to run vite-pages, collecting all components and their demos. The project setup will look like this:</p><div><pre class="prism-code language-text" style="color:#393A34;background-color:#f6f8fa"><div class="token-line" style="color:#393A34"><span class="token plain">packages</span></div><div class="token-line" style="color:#393A34"><span class="token plain">├── Button</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── demos</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── demo1.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   └── demo2.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── src</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── index.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   └── style.module.css</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── package.json</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   └── README.md</span></div><div class="token-line" style="color:#393A34"><span class="token plain">├── Card</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── demos</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── demo1.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   └── demo2.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── src</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── index.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   └── style.module.css</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── package.json</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   └── README.md</span></div><div class="token-line" style="color:#393A34"><span class="token plain">├── demos</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── pages</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   ├── index$.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   │   └── _theme.tsx</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── index.html</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   ├── package.json</span></div><div class="token-line" style="color:#393A34"><span class="token plain">│   └── vite.config.ts</span></div><div class="token-line" style="color:#393A34"><span class="token plain">└── package.json</span></div></pre></div><p>Checkout the complete example in <a href="https://github.com/vitejs/vite-plugin-react-pages/blob/master/packages/create-project/template-lib-monorepo/packages/demos/vite.config.ts">the lib-monorepo scaffold</a>.
You can initialize this project with command: <code>npm init vite-pages library-monorepo-demo --template lib-monorepo</code>.</p></div></main></div></div></div></div>
    <script type="module" src="/vite-plugin-react-pages/assets/clientRender.1634fafe.js"></script>
  </body>
</html>
